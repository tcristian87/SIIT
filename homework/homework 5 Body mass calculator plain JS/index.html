<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        input {
            margin: 6px 0;
        }
        #Gender, #Weight, #Height  {
            margin-left: 25px;
           
        }; 
       
    </style>
</head>
<body>
        <p> Calculate BMI</p>
        <div id = "input">
            <label for = "">First Name</label>
            <input type = "text" id = "FirstName" value = "">
        <div>
            <label for = "">Last Name</label>
            <input type = "text" id = "LastName" value = "">
        </div>
            <label for = "">Gender</label>
            <select id = "Gender" for = "Gender" value = "">
                <option value = ""></option>
                <option value = "M">M</option>
                <option value = "F">F</option>
                <option value = "Other">Other</option>
            </select>
        <div>
            <label for = "">Weight</label>
            <input type="text" id="Weight" value="">
        </div>
        <div>
            <label for ="">Height</label>
            <input type="text" id="Height" value="">
        </div>
    </div><br>
    <div id ="buttons" style = "margin-left: 100px">
        <div>
            <div id ="showBodyType"></div>
            <button type="button" onclick="Calculate()">Calculate BMI</button>  
        </div> 
        <br>
        <div id="createPersons">
            <button type="button" onclick="addClient()">Create Person</button>
                </div><br>
            <div id = "deletePerson">
                <button type="button" onclick ="Delete()">Delete Person</button>
                </div><br>
            <div id = "clearInput">
                <button onclick = "clearFields()">Clear fields</button>
            </div>
        </div><br>
        <div style = "margin-left: 50px">
        <p>Clients List</p>
        <ul id="clientsList">
            <li style="list-style-type: none;"></li>
        </ul>
        </div>
    
    <script> 
    function createPerson() {
            var firstName = document.getElementById("FirstName").value;
            var lastName = document.getElementById("LastName").value;
            var gender = document.getElementById("Gender").value;
            
     return  {
        firstName,
        lastName,
        gender,
        };
    }
function calculateBMI() {
    var weight = parseFloat (document.getElementById("Weight").value);
    var height = parseFloat (document.getElementById("Height").value); 
    if (Weight.value ==="" || Height.value === "") {
        alert("Please enter client Weight and Height to determinate BMI");
        return false;
    } else if (isNaN(Weight.value) || isNaN(Height.value)) { 
        alert("Please enter Weight in kg an Height in metters")
        return false;
    } else if (Height.value.toString().length <= 3 ) {
         height = height / 100;
    }
    return weight/(height * height);
}

function determiateBodyType() {
    var BMI = calculateBMI();
    var underweight = BMI < 18.5; 
    var normal = BMI > 18.5 && BMI < 25; 
    var overweight = BMI > 25 && BMI < 30; 
    
     if (underweight) {
        return (weightRange  = "BMI: " + (BMI.toFixed(1)) + "|" + "Underweight");
    }
    else if (normal) {
        return (weightRange = "BMI: " + (BMI.toFixed(1)) + "|" + "Normal Weight"); 
    }
    else if (overweight) {
        return( weightRange = "BMI: " + (BMI.toFixed(1)) + "|" + "Overveight");
    }
        return (weightRange = "BMI: " + (BMI.toFixed(1)) + "|" + "Obese");
    }
    var weightRange = weightRange; 
   

function Calculate() {
        var bodyType = document.getElementById("showBodyType");
        bodyType.innerText = `${ (FirstName.value)}|${determiateBodyType()}`;
    }

        const clients = [];
        const clientList = document.getElementById("clientsList");
        

function addClient () {
            const client = [(FirstName.value) +"|"+ (LastName.value) +"|"+ (Gender.value) + "|" + (weightRange)];
            if(FirstName.value ==="" ||LastName.value === "" || Gender.value === "") {
                alert("You most enter all client data")
            } else if (weightRange == undefined) {
                alert("First you most calculate BMI")
            }
            else { 
            clients.push(client);
            clientList.innerHTML = '';
            clients.forEach((client) => {
                const li = document.createElement("li");
                li.appendChild(document.createTextNode(client));
                clientList.appendChild(li);   
            })}
            console.log(clients)
        };

function Delete () {
    if (clients.length === 0) {
        alert("Nothing to delete. First you must register a client");
        return;
    }
    // while (clients.length) - permite golirea arrayului printr=un singur click
    clients.pop(); // permite stergerea ultimului obiect din array 
    console.log(clients)
    let clientsList = document.getElementById("clientsList");
    clientsList.removeChild(clientsList.lastElementChild);
}; 

function clearFields() {
            document.getElementById('FirstName').value ="";
            document.getElementById('LastName').value ="";
            document.getElementById('Gender').value ="";
            document.getElementById('Weight').value = "";
            document.getElementById('Height').value ="";
            document.getElementById('showBodyType').innerText = "";
};


    </script>
</body>
</html>